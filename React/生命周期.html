<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>生命周期 | 略记一二</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="笔记记了是要常常翻出来看的，不然干嘛要花那么多时间记笔记？">
    <link rel="preload" href="/assets/css/0.styles.e11ec23d.css" as="style"><link rel="preload" href="/assets/js/app.e38833ea.js" as="script"><link rel="preload" href="/assets/js/2.17cbeac6.js" as="script"><link rel="preload" href="/assets/js/14.87494d07.js" as="script"><link rel="prefetch" href="/assets/js/10.250fcf81.js"><link rel="prefetch" href="/assets/js/11.f157cd0b.js"><link rel="prefetch" href="/assets/js/12.a9bf3862.js"><link rel="prefetch" href="/assets/js/13.896ca89d.js"><link rel="prefetch" href="/assets/js/15.f68977cd.js"><link rel="prefetch" href="/assets/js/16.b94738a9.js"><link rel="prefetch" href="/assets/js/17.e2c75320.js"><link rel="prefetch" href="/assets/js/18.771a5ec2.js"><link rel="prefetch" href="/assets/js/19.d49b8edf.js"><link rel="prefetch" href="/assets/js/20.555d276b.js"><link rel="prefetch" href="/assets/js/21.e44090be.js"><link rel="prefetch" href="/assets/js/22.097d6f98.js"><link rel="prefetch" href="/assets/js/23.4b3259b7.js"><link rel="prefetch" href="/assets/js/24.3c89c6ed.js"><link rel="prefetch" href="/assets/js/25.f67fd8aa.js"><link rel="prefetch" href="/assets/js/26.884593de.js"><link rel="prefetch" href="/assets/js/27.0564c2cb.js"><link rel="prefetch" href="/assets/js/28.e1a2c4d8.js"><link rel="prefetch" href="/assets/js/29.1ebfe2ec.js"><link rel="prefetch" href="/assets/js/3.dac61e26.js"><link rel="prefetch" href="/assets/js/30.8c4ee977.js"><link rel="prefetch" href="/assets/js/31.8986c831.js"><link rel="prefetch" href="/assets/js/32.4b30f57a.js"><link rel="prefetch" href="/assets/js/33.b9a4cf5e.js"><link rel="prefetch" href="/assets/js/34.776e490e.js"><link rel="prefetch" href="/assets/js/35.9bdcf90b.js"><link rel="prefetch" href="/assets/js/36.b5932fba.js"><link rel="prefetch" href="/assets/js/37.df17cf67.js"><link rel="prefetch" href="/assets/js/38.3d8b4eda.js"><link rel="prefetch" href="/assets/js/39.b3be75c3.js"><link rel="prefetch" href="/assets/js/4.b0dc7c39.js"><link rel="prefetch" href="/assets/js/40.96fd608f.js"><link rel="prefetch" href="/assets/js/41.0513a23b.js"><link rel="prefetch" href="/assets/js/42.6cd3cc53.js"><link rel="prefetch" href="/assets/js/43.5ef51692.js"><link rel="prefetch" href="/assets/js/44.794100ff.js"><link rel="prefetch" href="/assets/js/45.d10168fa.js"><link rel="prefetch" href="/assets/js/46.10688120.js"><link rel="prefetch" href="/assets/js/47.094c2cd3.js"><link rel="prefetch" href="/assets/js/48.95a26822.js"><link rel="prefetch" href="/assets/js/49.41c75b8f.js"><link rel="prefetch" href="/assets/js/5.c61e0a12.js"><link rel="prefetch" href="/assets/js/50.06594e41.js"><link rel="prefetch" href="/assets/js/51.4227a338.js"><link rel="prefetch" href="/assets/js/52.b756be3f.js"><link rel="prefetch" href="/assets/js/53.0d45f222.js"><link rel="prefetch" href="/assets/js/54.a37e137d.js"><link rel="prefetch" href="/assets/js/55.81a19fae.js"><link rel="prefetch" href="/assets/js/56.800ff698.js"><link rel="prefetch" href="/assets/js/57.70844d0c.js"><link rel="prefetch" href="/assets/js/58.f750a736.js"><link rel="prefetch" href="/assets/js/59.46a720cc.js"><link rel="prefetch" href="/assets/js/6.b167fa87.js"><link rel="prefetch" href="/assets/js/60.281e7077.js"><link rel="prefetch" href="/assets/js/61.03db5b64.js"><link rel="prefetch" href="/assets/js/62.3ef279a6.js"><link rel="prefetch" href="/assets/js/63.58d1689f.js"><link rel="prefetch" href="/assets/js/64.691b77a9.js"><link rel="prefetch" href="/assets/js/65.aea71ebe.js"><link rel="prefetch" href="/assets/js/66.fdcb5c4c.js"><link rel="prefetch" href="/assets/js/67.3851f01d.js"><link rel="prefetch" href="/assets/js/68.eff1c7f3.js"><link rel="prefetch" href="/assets/js/69.b97074c2.js"><link rel="prefetch" href="/assets/js/7.092eb31d.js"><link rel="prefetch" href="/assets/js/70.7525968a.js"><link rel="prefetch" href="/assets/js/71.fdc9d9ba.js"><link rel="prefetch" href="/assets/js/72.e699fc43.js"><link rel="prefetch" href="/assets/js/73.a075b568.js"><link rel="prefetch" href="/assets/js/74.ad5edd6a.js"><link rel="prefetch" href="/assets/js/75.fcf08968.js"><link rel="prefetch" href="/assets/js/76.0fcbd3a7.js"><link rel="prefetch" href="/assets/js/77.1b7c112c.js"><link rel="prefetch" href="/assets/js/78.0aa2e0c8.js"><link rel="prefetch" href="/assets/js/79.036605dc.js"><link rel="prefetch" href="/assets/js/8.6636c5ea.js"><link rel="prefetch" href="/assets/js/80.2c62bfcb.js"><link rel="prefetch" href="/assets/js/81.3c52e5ef.js"><link rel="prefetch" href="/assets/js/82.541ed7c1.js"><link rel="prefetch" href="/assets/js/83.db9e79cf.js"><link rel="prefetch" href="/assets/js/9.71cb8be9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e11ec23d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">略记一二</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="http://blog.dangosky.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/DangoSky" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="http://blog.dangosky.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/DangoSky" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>React</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/React/state.html" class="sidebar-link">State</a></li><li><a href="/React/生命周期.html" class="active sidebar-link">生命周期</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/React/生命周期.html#constructor" class="sidebar-link">constructor</a></li><li class="sidebar-sub-header"><a href="/React/生命周期.html#componentwillmount" class="sidebar-link">componentWillMount</a></li><li class="sidebar-sub-header"><a href="/React/生命周期.html#render" class="sidebar-link">render</a></li><li class="sidebar-sub-header"><a href="/React/生命周期.html#componedidmount" class="sidebar-link">componeDidMount</a></li><li class="sidebar-sub-header"><a href="/React/生命周期.html#componentwillreceiveprops-nextprops" class="sidebar-link">componentWillReceiveProps(nextProps)</a></li><li class="sidebar-sub-header"><a href="/React/生命周期.html#shouldcomponentupdate-nextprops-nextstate" class="sidebar-link">shouldComponentUpdate(nextProps, nextState)</a></li><li class="sidebar-sub-header"><a href="/React/生命周期.html#componentwillupdate-nextprops-nextstate" class="sidebar-link">componentWillUpdate(nextProps, nextState)</a></li><li class="sidebar-sub-header"><a href="/React/生命周期.html#componentdidupdate-prevprops-prevstate-snapshot" class="sidebar-link">componentDidUpdate(prevProps, prevState, snapshot)</a></li><li class="sidebar-sub-header"><a href="/React/生命周期.html#componentwillunmount" class="sidebar-link">componentWillUnmount</a></li><li class="sidebar-sub-header"><a href="/React/生命周期.html#getderivedstatefromprops-nextprops-prevstate" class="sidebar-link">getDerivedStateFromProps(nextProps, prevState)</a></li><li class="sidebar-sub-header"><a href="/React/生命周期.html#getsnapshotbeforeupdate-prevprops-prevstate" class="sidebar-link">getSnapshotBeforeUpdate(prevProps, prevState)</a></li><li class="sidebar-sub-header"><a href="/React/生命周期.html#static-getderivedstatefromerror-error" class="sidebar-link">static getDerivedStateFromError(error)</a></li><li class="sidebar-sub-header"><a href="/React/生命周期.html#componentdidcatch-error-info" class="sidebar-link">componentDidCatch(error, info)</a></li><li class="sidebar-sub-header"><a href="/React/生命周期.html#示意图" class="sidebar-link">示意图</a></li><li class="sidebar-sub-header"><a href="/React/生命周期.html#执行流程" class="sidebar-link">执行流程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/React/生命周期.html#挂载" class="sidebar-link">挂载</a></li><li class="sidebar-sub-header"><a href="/React/生命周期.html#更新" class="sidebar-link">更新</a></li><li class="sidebar-sub-header"><a href="/React/生命周期.html#错误处理" class="sidebar-link">错误处理</a></li><li class="sidebar-sub-header"><a href="/React/生命周期.html#渲染" class="sidebar-link">渲染</a></li></ul></li></ul></li><li><a href="/React/有问有答.html" class="sidebar-link">有问有答</a></li><li><a href="/React/踩坑指南.html" class="sidebar-link">踩坑指南</a></li><li><a href="/React/组件通信.html" class="sidebar-link">组件通信</a></li><li><a href="/React/其他.html" class="sidebar-link">其他</a></li><li><a href="/React/Hook.html" class="sidebar-link">Hook</a></li><li><a href="/React/虚拟DOM.html" class="sidebar-link">虚拟 DOM</a></li><li><a href="/React/React-Fiber.html" class="sidebar-link">React Fiber</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React-Route</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Mobx</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>操作系统</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="生命周期"><a href="#生命周期" class="header-anchor">#</a> 生命周期</h1> <blockquote><p>官方文档<a href="https://zh-hans.reactjs.org/docs/react-component.html#commonly-used-lifecycle-methods" target="_blank" rel="noopener noreferrer">见这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p></blockquote> <h2 id="constructor"><a href="#constructor" class="header-anchor">#</a> constructor</h2> <ul><li>使用：初始化 state 和 props。（只会执行一次）。</li></ul> <h2 id="componentwillmount"><a href="#componentwillmount" class="header-anchor">#</a> componentWillMount</h2> <ul><li>使用：可以调用 setState 方法来改变状态值。</li> <li>注意点：
<ul><li>这方法里同步地设置状态将不会触发重渲染。</li> <li>无法获取页面中的DOM对象。</li></ul></li> <li>不推荐使用，要被废弃了。</li></ul> <h2 id="render"><a href="#render" class="header-anchor">#</a> render</h2> <ul><li>注意点：
<ul><li>不要在 render 方法中调用 setState 方法，否则会递归渲染导致报错。</li> <li>无法获取页面中的DOM对象。</li></ul></li></ul> <h2 id="componedidmount"><a href="#componedidmount" class="header-anchor">#</a> componeDidMount</h2> <ul><li>触发条件：组件挂载后（插入 DOM 树中）立即调用，此时页面还没有渲染出来。</li> <li>使用：可以进行DOM操作和网络请求。</li></ul> <h2 id="componentwillreceiveprops-nextprops"><a href="#componentwillreceiveprops-nextprops" class="header-anchor">#</a> componentWillReceiveProps(nextProps)</h2> <ul><li>触发条件：组件要从父组件接受新的props，并且该组件不是第一次被渲染出来。</li> <li>不推荐使用，要被废弃了。</li></ul> <h2 id="shouldcomponentupdate-nextprops-nextstate"><a href="#shouldcomponentupdate-nextprops-nextstate" class="header-anchor">#</a> shouldComponentUpdate(nextProps, nextState)</h2> <ul><li>触发条件：组件更新之前触发，默认返回 true。如果返回 false 则不再继续后面的生命周期钩子也就不会render（返回 false 并不会阻止子组件在 state 更改时重新渲染）。首次渲染或使用 forceUpdate() 时不会调用该方法。</li> <li>使用：可以通过比较新的 props 和旧的 props 中值是否更新来控制是否重新渲染。避免因为props变化了而子组件数据没有改变却依旧要执行render造成的性能浪费。</li></ul> <h2 id="componentwillupdate-nextprops-nextstate"><a href="#componentwillupdate-nextprops-nextstate" class="header-anchor">#</a> componentWillUpdate(nextProps, nextState)</h2> <ul><li>触发条件：组件更新之前。只有 <code>shouldComponentUpdate</code> 返回 true 才会执行。</li> <li>不推荐使用，要被废弃了。</li></ul> <h2 id="componentdidupdate-prevprops-prevstate-snapshot"><a href="#componentdidupdate-prevprops-prevstate-snapshot" class="header-anchor">#</a> componentDidUpdate(prevProps, prevState, snapshot)</h2> <ul><li>触发条件：在更新后会被立即调用，首次渲染不会执行此方法。</li> <li>注意：可以在 <code>componentDidUpdate</code> 中直接调用 setState()，但它必须被包裹在一个条件语件里，否则会导致死循环，因为每次更新都会调用到 <code>componentDidUpdate</code>。</li> <li>snapshot参数：如果组件实现了 <code>getSnapshotBeforeUpdate</code> 生命钩子，则它的返回值将作为 <code>componentDidUpdate</code> 的第三个参数 snapshot，否则此参数将为 undefined。</li></ul> <h2 id="componentwillunmount"><a href="#componentwillunmount" class="header-anchor">#</a> componentWillUnmount</h2> <ul><li>使用：清除定时器，取消网络请求。</li></ul> <h2 id="getderivedstatefromprops-nextprops-prevstate"><a href="#getderivedstatefromprops-nextprops-prevstate" class="header-anchor">#</a> getDerivedStateFromProps(nextProps, prevState)</h2> <ul><li>触发条件：在 render 之前调用，并且在初始挂载及后续更新时都会被调用。</li> <li>使用：返回一个对象来更新 state，如果返回 null 则不更新任何内容。而 <code>componentWillReceiveProps</code> 仅在父组件重新渲染时触发，而不是在内部调用 setState 时。</li> <li>注意：<code>getDerivedStateFromProps</code> 是一个静态函数，所以不能通过 this 访问到 class 的属性，即无法访问组件实例。</li></ul> <h2 id="getsnapshotbeforeupdate-prevprops-prevstate"><a href="#getsnapshotbeforeupdate-prevprops-prevstate" class="header-anchor">#</a> getSnapshotBeforeUpdate(prevProps, prevState)</h2> <ul><li>触发条件：在 update 后 DOM 更新前被调用，用于读取最新的 DOM 数据。其返回值将作为参数传递给 <code>componentDidUpdate</code>。</li></ul> <h2 id="static-getderivedstatefromerror-error"><a href="#static-getderivedstatefromerror-error" class="header-anchor">#</a> static getDerivedStateFromError(error)</h2> <ul><li><p>触发条件：在后代组件抛出错误后被调用。它将抛出的错误作为参数，并返回一个值以更新 state。</p></li> <li><p>注意：<code>getDerivedStateFromError</code> 会在渲染阶段调用，因此不允许出现副作用。</p></li></ul> <h2 id="componentdidcatch-error-info"><a href="#componentdidcatch-error-info" class="header-anchor">#</a> componentDidCatch(error, info)</h2> <ul><li>触发条件：在后代组件抛出错误后被调用。它接收两个参数：
error： 抛出的错误。
info：带有<code>componentStack key</code> 的对象，其中包含有关组件引发错误的栈信息。</li></ul> <h2 id="示意图"><a href="#示意图" class="header-anchor">#</a> 示意图</h2> <p><a href="http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/" target="_blank" rel="noopener noreferrer">图谱<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p><img src="/assets/img/1.dc6eeedf.png" alt=""></p> <p><img src="/assets/img/2.7c087f6b.png" alt=""></p> <h2 id="执行流程"><a href="#执行流程" class="header-anchor">#</a> 执行流程</h2> <h3 id="挂载"><a href="#挂载" class="header-anchor">#</a> 挂载</h3> <p>当组件实例被创建并插入 DOM 中时，其生命周期调用顺序如下：</p> <ol><li><code>constructor</code></li> <li><code>static getDerivedStateFromProps</code></li> <li><code>render</code></li> <li><code>componentDidMount</code></li></ol> <h3 id="更新"><a href="#更新" class="header-anchor">#</a> 更新</h3> <p>当组件的 props 或 state 发生变化时会触发更新。组件更新的生命周期调用顺序如下：</p> <ol><li><code>static getDerivedStateFromProps</code></li> <li><code>shouldComponentUpdate</code></li> <li><code>render</code></li> <li><code>getSnapshotBeforeUpdate</code></li> <li><code>componentDidUpdate</code></li></ol> <h3 id="错误处理"><a href="#错误处理" class="header-anchor">#</a> 错误处理</h3> <p>当渲染过程，生命周期，或子组件的构造函数中抛出错误时，会调用如下方法：</p> <ol><li><code>static getDerivedStateFromError</code></li> <li><code>componentDidCatch</code></li></ol> <h3 id="渲染"><a href="#渲染" class="header-anchor">#</a> 渲染</h3> <p>只要 state 或 props 改变了（即使是赋相同的值），就会调用 <code>render</code> 函数渲染组件，之后进行 DOM diff。使用 pure Component 可以进行浅层次的比较，防止无谓的渲染（或者手动使用 <code>shouldComponentUpdate</code>）。</p> <p>或者使用 <code>component.forceUpdate(callback)</code> 强制组件调用 render 刷新。此操作会跳过该组件的 <code>shouldComponentUpdate</code>，但还是会触发正常的生命周期方法。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/React/state.html" class="prev">
        State
      </a></span> <span class="next"><a href="/React/有问有答.html">
        有问有答
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e38833ea.js" defer></script><script src="/assets/js/2.17cbeac6.js" defer></script><script src="/assets/js/14.87494d07.js" defer></script>
  </body>
</html>
