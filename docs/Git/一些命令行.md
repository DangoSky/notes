# 一些命令行

## 参考资料

- [Git飞行规则](https://github.com/k88hudson/git-flight-rules/blob/master/README_zh-CN.md)

- [My blog](http://blog.dangosky.com/2019/09/03/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/)

- [用动图解释 Git 工作原理这还是头一回](https://mp.weixin.qq.com/s/FQPM_oSU5qU53y_SfdDG-A)

## git diff

`git diff origin/master` 用于和远端某个分支做 diff。当团队合作在一个远端分支开发时，通常 push 前需要将本地分支和远端分支 diff 一下，看看有没有冲突啥的。

## git checkout

- `git checkout -b <branchName> <hashID>` 恢复已经删除了的分支。

- `git checkout --filename`  放弃某个文件的修改（未暂存，即还没 git add）。

- `git checkout .` 放弃所有未暂存文件的修改。

## git cherry-pick

`git cherry-pick <commit id>`：将某一个 commit 选到当前的分支上。

`git cherry-pick A..B`：将 (A, B] 之间的 commit 都导入到当前分支。

`git cherry-pick A^..B`：将 [A, B] 之间的 commit 都导入到当前分支。

## git clone url newName

克隆新项目并重命名

## git help command

获取该命令的帮助

## git commit —amend

`git commit --amend -m "<commit message>"` 将本次修改追加在上次的提交中，并修改 commit message。

`git commit --amend --no-edit` 不修改 commit message 追加在上次的提交中。

`git commit --allow-empty -m "<commit message>"` 空提交，可以用来重新触发 CI 构建。

`git commit --no-verify -m "<commit message>"` 跳过 lint 校验直接提交。注意 `--no-verify` 需要在 `-m` 前面，否则会报错 `error: pathspec <commit message> did not match any file(s) known to git`。

## git branch

将分支按最后提交 Commit 的日期进行排序。

```bash
git branch --sort=committerdate   # ASC
git branch --sort=-committerdate  # DESC，最新的分支会出现在列表的最上面
```

## git rebase

- git pull = git fetch + git merge

- git pull --rebase = git fetch + git rebase

- 执行完 git pull --rebase 之后如果有合并冲突，使用以下三种方式处理这些冲突：

  - git rebase --abort 会放弃合并，回到 rebase 操作之前的状态，相当于撤销 rebase。
  - git rebase --skip 则会将引起冲突的 commits 丢弃掉（慎用！！）；
  - git rebase --continue 合并冲突，手动解决完冲突后 git add./，执行 git rebase --continue，不用 git commit 直接 push 即可。

## git push --force-with-lease

当使用 --force-with-lease 进行提交的时候，Git 会将当前提交者本地远程分支内的提交和真正远程服务器上的提交进行比较。如果两者是相同的，那么就会允许这一次的 Force Push 操作；如果发现是不同的，那么很大概率就是远端有了他人的新提交，这时 Force Push 就不会成功了。此时，提交者应该通过 git fetch 的方式拿到最新的代码，确认是否需要进行更新改动，然后再次提交。需要注意的是，因为 Git 只是进行了本地远程分支和远程分支的比较，因此 git fetch 之后即使什么也不做，直接再一次进行 git push --force-with-lease 操作也是可以成功的。


## 常用命令速查表

![](./images/1.png)

![](./images/2.png)



