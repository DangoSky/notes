# 踩坑指南

- $refs 本身作为渲染结果被创建，在初始渲染的时候不能访问他们，此时是不存在的。

- $refs不是响应式的，只在组件渲染完成后才填充，所有的动态加载的模板更新它都无法相应的变化。比如在 v-for 中使用 $refs，而循环的次数没有事先指定有待某一个操作获取，此时则获取不到 $refs，需要等 DOM 更新后才能获取到 $refs。可以使用 `Vue.$nextTick(callback)`。

- Vue 不能检测以下数组的变动
  - 利用索引直接设置一个项时，例如：`vm.items[indexOfItem] = newValue`。
  - 修改数组的长度时，例如：`vm.items.length = newLength`。
  - 可以使用以下两个方法代替：
    - 使用 Vue.set() 或 this.$set()，vm.$set(vm.items, indexOfItem, newValue)
    - vm.items.splice(newLength)
  - 可以观察到对象改变的api：push() pop() shift() unshift() splice() sort() reverse()。
  - Vue.set()是将set函数绑定在Vue构造函数上，this.$set()是将set函数绑定在Vue原型上。
